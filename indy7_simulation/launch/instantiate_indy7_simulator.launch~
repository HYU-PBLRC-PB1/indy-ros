<?xml version="1.0" encoding="UTF-8"?>

<launch>
	
	<!-- <arg name = "ns" default = "indy7" /> -->
	<arg name = "x" default = "0.0" /> <!-- 0.3 -->
	<arg name = "y" default = "0.0" /> <!-- 0.92 -->
	<arg name = "z" default = "0.05" /> <!-- 0.9 -->    
	
	<arg name="robot_ip" doc="IP of the controller" default="192.168.1.8" /> <!-- robot_ip: IP-address of the robot's socket-messaging server -->
	<arg name="robot_name" doc="Name of Indy robot" default="NRMK-Indy7"/>  <!-- robot_name: The general name of Indy robot (e.g. IndyRP, Indy7, Indy15, etc.) -->
	<arg name = "model_name" default = "indy7_1" />
	
	<arg name = "xacro_robot_file" default = "$(find indy7_simulation)/urdf/indy7_with_controllers.xacro" />    
	<param name = "robot_description" command = "$(find xacro)/xacro --inorder '$(arg xacro_robot_file)'" />
	<node name = "urdf_spawner" pkg = "gazebo_ros" type = "spawn_model" respawn = "false" output = "screen" args = "-urdf -x $(arg x) -y $(arg y) -z $(arg z) -model $(arg model_name) -param robot_description" />

	
	<param name="robot_ip_address" type="str" value="$(arg robot_ip)"/>
	<param name="robot_name" type="str" value="$(arg robot_name)"/>
  
  
    <!-- <arg name = "ns" default = "indy7" /> 
	<rosparam file="$(find indy7_simulation)/config/indy7_controllers.yaml" command="load"/>

	<node name="controller_spawner" pkg="controller_manager" type="spawner" respawn="false" output="screen"
			ns="/indy7" args="	joint_state_controller 
								joint0_position_controller
								joint1_position_controller
								joint2_position_controller
								joint3_position_controller
								joint4_position_controller
								joint5_position_controller
								"/>-->
							
	<rosparam file="$(find indy7_simulation)/config/indy7_controllers.yaml" command="load"/>

	<node name="controller_spawner" pkg="controller_manager" type="spawner" respawn="false" output="screen"
			 ns="/indy7_1" args="	joint_state_controllers
								joint0_position_controller
								joint1_position_controller
								joint2_position_controller
								joint3_position_controller
								joint4_position_controller
								joint5_position_controller
								"/>

	<node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" respawn="false" output="screen">
		<remap from="/joint_states" to="/$(arg model_name)/joint_states"/>
	</node>
	<node name="joint_state_controller_spawner" pkg="controller_manager" type="controller_manager"
        args="spawn joint_state_controller" respawn="false" output="screen" />
        
	<!-- <node pkg="indy7_simulation" type="indy7_connector" name="indy7_connector" output="screen"/> -->
	
</launch>
